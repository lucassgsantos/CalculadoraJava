import java.awt.*; 
import java.awt.event.*;
import java.util.Arrays;
import javax.swing.*;
import javax.swing.border.LineBorder;

public class Calculator { 
    private final int WINDOW_WIDTH = 360;
    private final int WINDOW_HEIGHT = 540;
   
    private final Color LIGHT_GRAY = new Color(212, 212, 210); 
    private final Color DARK_GRAY = new Color(80, 80, 80); 
    private final Color BLACK = new Color(28, 28, 28); 
    private final Color ORANGE = new Color(255, 149, 0); 

    private final String[] BUTTON_LABELS = {
        "AC", "+/-", "%", "÷",
        "7", "8", "9", "×",
        "4", "5", "6", "-",
        "1", "2", "3", "+",
        "0", ".", "√", "="
    };
    private final String[] RIGHT_OPERATORS = {"÷", "×", "-", "+", "="};
    private final String[] TOP_OPERATORS = {"AC", "+/-", "%"};

    private JFrame frame = new JFrame("Calculator");
    private JLabel displayLabel = new JLabel();
    private JPanel displayPanel = new JPanel();
    private JPanel buttonsPanel = new JPanel();

    private String firstOperand = "0";
    private String operator = null;
    private String secondOperand = null;

    public Calculator(){
        frame.setVisible(true);
        frame.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        frame.setLocationRelativeTo(null); 
        frame.setResizable(false); 
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        frame.setLayout(new BorderLayout()); 

        displayLabel.setBackground(BLACK);
        displayLabel.setForeground(Color.white); 
        displayLabel.setFont(new Font("Arial", Font.PLAIN, 80));
        displayLabel.setHorizontalAlignment(JLabel.RIGHT); 
        displayLabel.setText("0");
        displayLabel.setOpaque(true);

        displayPanel.setLayout(new BorderLayout());
        displayPanel.add(displayLabel); 
        frame.add(displayLabel, BorderLayout.NORTH); 

        buttonsPanel.setLayout(new GridLayout(5, 4));
        buttonsPanel.setBackground(BLACK);
        frame.add(buttonsPanel); 

        for (String label : BUTTON_LABELS){
            JButton button = new JButton(label);
            button.setFont(new Font("Arial", Font.PLAIN, 30));
            button.setFocusable(false);
            button.setBorder(new LineBorder(BLACK));

            if (Arrays.asList(TOP_OPERATORS).contains(label)){
                button.setBackground(LIGHT_GRAY);
                button.setForeground(BLACK);
            } else if (Arrays.asList(RIGHT_OPERATORS).contains(label)){
                button.setBackground(ORANGE);
                button.setForeground(Color.white);
            } else {
                button.setBackground(DARK_GRAY);
                button.setForeground(Color.white);
            }

            buttonsPanel.add(button);

            button.addActionListener(e -> handleButtonClick(button.getText()));
        }
    }

    private void handleButtonClick(String value){
        if (Arrays.asList(RIGHT_OPERATORS).contains(value)){
            if (value.equals("=")) {
                if (firstOperand != null && operator != null) {
                    secondOperand = displayLabel.getText();
                    double numA = Double.parseDouble(firstOperand);
                    double numB = Double.parseDouble(secondOperand);
                    double result = 0;

                    switch (operator) {
                        case "+": result = numA + numB; break;
                        case "-": result = numA - numB; break;
                        case "×": result = numA * numB; break;
                        case "÷": result = numA / numB; break;
                    }

                    displayLabel.setText(formatResult(result));
                    clearAll();
                }
            } else if ("+-×÷".contains(value)) {
                if (operator == null) {
                    firstOperand = displayLabel.getText();
                    displayLabel.setText("0");
                    secondOperand = "0";
                }
                operator = value;
            }
        } else if (Arrays.asList(TOP_OPERATORS).contains(value)) {
            switch (value) {
                case "AC":
                    clearAll();
                    displayLabel.setText("0");
                    break;
                case "+/-":
                    double negValue = Double.parseDouble(displayLabel.getText()) * -1;
                    displayLabel.setText(formatResult(negValue));
                    break;
                case "%":
                    double percentValue = Double.parseDouble(displayLabel.getText()) / 100;
                    displayLabel.setText(formatResult(percentValue));
                    break;
            }
        } else {
            if (value.equals(".")){
                if (!displayLabel.getText().contains(".")) {
                    displayLabel.setText(displayLabel.getText() + value); 
                }
            } else {
                if (displayLabel.getText().equals("0")){
                    displayLabel.setText(value);
                } else {
                    displayLabel.setText(displayLabel.getText() + value);
                }
            }
        }
    }

    private void clearAll(){
        firstOperand = "0";
        operator = null;
        secondOperand = null;
    }

    private String formatResult(double number) {
        if (number % 1 == 0){
            return Integer.toString((int) number);
        }
        return Double.toString(number);
    }

    public static void main(String[] args) {
        new Calculator();
    }
}
